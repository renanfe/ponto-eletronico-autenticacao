FROM openjdk:17-alpine
ARG SPRING_PROFILE
ARG REDIS_URL
ARG REDIS_PORT
ARG REDIS_PASSWORD
ARG CLIENT_ID
ARG CLIENT_SECRET
ARG REDIRECT_URI
ARG CLIENT_NAME
ARG ISSUER_URI
ENV SPRING_PROFILE=${SPRING_PROFILE}
ENV REDIS_URL=${REDIS_URL}
ENV REDIS_PORT=${REDIS_PORT}
ENV REDIS_PASSWORD=${REDIS_PASSWORD}
ENV CLIENT_ID=${CLIENT_ID}
ENV CLIENT_SECRET=${CLIENT_SECRET}
ENV REDIRECT_URI=${REDIRECT_URI}
ENV CLIENT_NAME=${CLIENT_NAME}
ENV ISSUER_URI=${ISSUER_URI}
COPY ../target/ponto-eletronico-autenticacao-0.0.1.jar /usr/src/myapp/app.jar
WORKDIR /usr/src/myapp
ENTRYPOINT java -Dspring.profiles.active="$SPRING_PROFILE" -jar app.jar